(()=>{"use strict";var e={5812:(e,a,t)=>{t(8964);var l=t(1957),o=t(1947),i=t(499),r=t(9835);function s(e,a,t,l,o,i){const s=(0,r.up)("router-view");return(0,r.wg)(),(0,r.j4)(s)}const n=(0,r.aZ)({name:"App"});var d=t(1639);const u=(0,d.Z)(n,[["render",s]]),c=u;var m=t(3340),p=t(1809);const h=(0,m.h)((()=>{const e=(0,p.WB)();return e}));var g=t(8339);const b=e=>((0,r.dD)("data-v-a0f0d6c6"),e=e(),(0,r.Cn)(),e),w={class:"row"},f=b((()=>(0,r._)("div",{class:"col-1 col-sm-4"},null,-1))),v={class:"col-10 col-sm-4"},_=b((()=>(0,r._)("div",{class:"text-subtitle1 text-center q-pt-xs text-grey"},"CUENTA",-1))),C=b((()=>(0,r._)("div",{class:"text-h2 text-center q-pa-xs text-black text-bold"},"Tu Cuenta",-1))),V={class:"row"},q={class:"col-12"},W={class:"col-12 q-pt-lg"},U={class:"col-12 q-py-xs"},y={class:"col-12 q-pt-xs"},D=b((()=>(0,r._)("div",{class:"col-12 q-pt-xs"},null,-1))),A=b((()=>(0,r._)("div",{class:"col-12 text-center q-py-none"},[(0,r._)("a",{href:"",class:"text-blue-8"},"¿Olvidaste tu contraseña?")],-1))),$=b((()=>(0,r._)("div",{class:"text-subtitle1 text-center text-caption q-pt-lg text-grey"},[(0,r.Uk)("AL INICIAR SESIÓN, USTED ACEPTA LOS "),(0,r._)("a",{href:"",class:"text-blue-8"},"TÉRMINOS DEL SERVICIO"),(0,r.Uk)(" Y "),(0,r._)("a",{href:"",class:"text-blue-8"},"LA POLÍTICA DE PRIVACIDAD")],-1))),k=b((()=>(0,r._)("div",{class:"col-1 col-sm-4"},null,-1)));function I(e,a,t,o,i,s){const n=(0,r.up)("q-input"),d=(0,r.up)("q-icon"),u=(0,r.up)("q-checkbox"),c=(0,r.up)("q-btn"),m=(0,r.up)("q-form"),p=(0,r.up)("q-card-section"),h=(0,r.up)("q-card"),g=(0,r.up)("q-page"),b=(0,r.up)("q-page-container"),I=(0,r.up)("q-layout");return(0,r.wg)(),(0,r.j4)(I,{view:"lHh Lpr lFf",class:"bg-grey-2"},{default:(0,r.w5)((()=>[(0,r.Wm)(b,null,{default:(0,r.w5)((()=>[(0,r.Wm)(g,null,{default:(0,r.w5)((()=>[(0,r._)("div",w,[f,(0,r._)("div",v,[_,C,(0,r.Wm)(h,{flat:"",bordered:""},{default:(0,r.w5)((()=>[(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(m,{class:"q-pa-lg",onSubmit:(0,l.iM)(s.login,["prevent"])},{default:(0,r.w5)((()=>[(0,r._)("div",V,[(0,r._)("div",q,[(0,r.Wm)(n,{outlined:"",modelValue:i.email,"onUpdate:modelValue":a[0]||(a[0]=e=>i.email=e),label:"Email",type:"email",required:""},null,8,["modelValue"])]),(0,r._)("div",W,[(0,r.Wm)(n,{outlined:"",modelValue:i.password,"onUpdate:modelValue":a[2]||(a[2]=e=>i.password=e),label:"Contraseña",type:i.typePassword?"password":"text",required:""},{append:(0,r.w5)((()=>[(0,r.Wm)(d,{onClick:a[1]||(a[1]=e=>i.typePassword=!i.typePassword),name:i.typePassword?"visibility":"visibility_off"},null,8,["name"])])),_:1},8,["modelValue","type"])]),(0,r._)("div",U,[(0,r.Wm)(u,{modelValue:i.remember,"onUpdate:modelValue":a[3]||(a[3]=e=>i.remember=e),class:"grey",label:"Recuérdame",size:"30px"},null,8,["modelValue"])]),(0,r._)("div",y,[(0,r.Wm)(c,{size:"22px",loading:i.loading,class:"full-width bold",color:"primary",label:"Iniciar Sesión",type:"submit","no-caps":""},null,8,["loading"])]),D,A])])),_:1},8,["onSubmit"])])),_:1})])),_:1}),$]),k])])),_:1})])),_:1})])),_:1})}t(9665);var T=t(7292);const E={name:"Login",data(){return{email:"",password:"",remember:!1,typePassword:!0,loading:!1,store:(0,T.A)()}},mounted(){this.store.isLogged&&this.$router.push("/")},methods:{login(){this.loading=!0,this.$api.post("login",{email:this.email,password:this.password}).then((e=>{this.$q.notify({message:"Bienvenido",color:"positive",icon:"check_circle",position:"top"}),this.$router.push("/"),this.store.user=e.data.user,this.store.isLogged=!0,this.$api.defaults.headers.common["Authorization"]="Bearer "+e.data.token,localStorage.setItem("tokenTor",e.data.token)})).catch((e=>{console.log(e),this.$q.notify({message:e.response.data.message,color:"negative",position:"top",timeout:2e3})})).finally((()=>{this.loading=!1}))}}};var x=t(7605),S=t(2133),O=t(9885),Z=t(4458),P=t(3190),Q=t(8326),R=t(6611),N=t(2857),M=t(1221),G=t(8879),B=t(9984),L=t.n(B);const z=(0,d.Z)(E,[["render",I],["__scopeId","data-v-a0f0d6c6"]]),j=z;L()(E,"components",{QLayout:x.Z,QPageContainer:S.Z,QPage:O.Z,QCard:Z.Z,QCardSection:P.Z,QForm:Q.Z,QInput:R.Z,QIcon:N.Z,QCheckbox:M.Z,QBtn:G.Z});var F=t(6970);const Y=(0,r._)("div",{class:"text-h6"},"Agregar Empresa",-1),H=(0,r._)("div",{class:"text-h6"},"Agregar Empresa",-1);function J(e,a,t,o,i,s){const n=(0,r.up)("q-btn"),d=(0,r.up)("q-input"),u=(0,r.up)("q-toolbar"),c=(0,r.up)("q-badge"),m=(0,r.up)("q-td"),p=(0,r.up)("q-table"),h=(0,r.up)("q-card-section"),g=(0,r.up)("q-select"),b=(0,r.up)("q-form"),w=(0,r.up)("q-card"),f=(0,r.up)("q-dialog"),v=(0,r.up)("q-page");return(0,r.wg)(),(0,r.j4)(v,null,{default:(0,r.w5)((()=>[(0,r.Wm)(p,{rows:i.empresas,columns:i.empresaColums,filter:i.search},{"top-right":(0,r.w5)((()=>[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Wm)(n,{flat:"",icon:"add_circle_outline",onClick:a[0]||(a[0]=e=>{i.showAddUserDialog=!0,i.empresaCrear=!0})}),(0,r.Wm)(d,{modelValue:i.search,"onUpdate:modelValue":a[1]||(a[1]=e=>i.search=e),outlined:"",dense:"",placeholder:"Buscar..."},null,8,["modelValue"])])),_:1})])),"body-cell-estado":(0,r.w5)((e=>[(0,r.Wm)(m,{props:e,"auto-width":""},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{dense:"","text-color":"white",color:"Activo"==e.row.estado?"green":"red"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,F.zw)(e.row.estado),1)])),_:2},1032,["color"])])),_:2},1032,["props"])])),"body-cell-option":(0,r.w5)((e=>[(0,r.Wm)(m,{props:e,"auto-width":""},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{flat:"",dense:"",icon:"o_edit",onClick:a=>s.empresaEdit(e.row)},null,8,["onClick"]),(0,r.Wm)(n,{flat:"",dense:"",icon:"o_delete",onClick:a=>s.empresaDelete(e.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"]),(0,r.Wm)(f,{modelValue:i.showAddUserDialog,"onUpdate:modelValue":a[6]||(a[6]=e=>i.showAddUserDialog=e)},{default:(0,r.w5)((()=>[(0,r.Wm)(w,{style:{width:"700px","max-width":"85vw"}},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{class:"row items-center"},{default:(0,r.w5)((()=>[Y])),_:1}),(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Wm)(b,{onSubmit:(0,l.iM)(s.empresaCreate,["prevent"])},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{modelValue:i.empresa.nombre,"onUpdate:modelValue":a[2]||(a[2]=e=>i.empresa.nombre=e),hint:"",required:"",outlined:"",label:"Nombre"},null,8,["modelValue"]),(0,r.Wm)(g,{modelValue:i.empresa.ciudad,"onUpdate:modelValue":a[3]||(a[3]=e=>i.empresa.ciudad=e),hint:"",required:"",outlined:"",label:"Ciudad",options:["ORURO","LA PAZ","COCHABAMBA","SANTA CRUZ","POTOSI","TARIJA","CHUQUISACA","BENI","PANDO"]},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.empresa.telefono,"onUpdate:modelValue":a[4]||(a[4]=e=>i.empresa.telefono=e),hint:"",required:"",outlined:"",label:"Telefono"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.empresa.nit,"onUpdate:modelValue":a[5]||(a[5]=e=>i.empresa.nit=e),hint:"",required:"",outlined:"",label:"NIT"},null,8,["modelValue"]),(0,r.Wm)(n,{loading:i.loading,type:"submit",color:"primary",icon:"add_circle_outline",label:"Guardar",class:"full-width"},null,8,["loading"])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.Wm)(f,{modelValue:i.showUpdateUserDialog,"onUpdate:modelValue":a[11]||(a[11]=e=>i.showUpdateUserDialog=e)},{default:(0,r.w5)((()=>[(0,r.Wm)(w,{style:{width:"700px","max-width":"85vw"}},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{class:"row items-center"},{default:(0,r.w5)((()=>[H])),_:1}),(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Wm)(b,{onSubmit:(0,l.iM)(s.empresaUpdate,["prevent"])},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{modelValue:i.empresa.nombre,"onUpdate:modelValue":a[7]||(a[7]=e=>i.empresa.nombre=e),hint:"",required:"",outlined:"",label:"Nombre"},null,8,["modelValue"]),(0,r.Wm)(g,{modelValue:i.empresa.ciudad,"onUpdate:modelValue":a[8]||(a[8]=e=>i.empresa.ciudad=e),hint:"",required:"",outlined:"",label:"Ciudad",options:["ORURO","LA PAZ","COCHABAMBA","SANTA CRUZ","POTOSI","TARIJA","CHUQUISACA","BENI","PANDO"]},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.empresa.telefono,"onUpdate:modelValue":a[9]||(a[9]=e=>i.empresa.telefono=e),hint:"",required:"",outlined:"",label:"Telefono"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.empresa.nit,"onUpdate:modelValue":a[10]||(a[10]=e=>i.empresa.nit=e),hint:"",required:"",outlined:"",label:"NIT"},null,8,["modelValue"]),(0,r.Wm)(n,{loading:i.loading,type:"submit",color:"primary",icon:"add_circle_outline",label:"Guardar",class:"full-width"},null,8,["loading"])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}const X={name:"User",data(){return{roles:["INSCRIPCION","ACREDITACION","REFRIGERIO","ADMINISTRADOR"],showAddUserDialog:!1,showUpdateUserDialog:!1,search:"",empresas:[],empresa:{},loading:!1,empresaCrear:!0,empresaColums:[{name:"option",field:"option",label:"Opciones",align:"left",sortable:!0},{name:"estado",field:"estado",label:"Estado",align:"left",sortable:!0},{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"nombre",label:"Nombre",field:"nombre",align:"left",sortable:!0},{name:"ciudad",label:"Ciudad",field:"ciudad",align:"left",sortable:!0}]}},methods:{empresaUpdate(){this.loading=!0,this.$api.put(`empresa/${this.empresa.id}`,this.empresa).then((e=>{this.loading=!1,this.showUpdateUserDialog=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"check_circle",message:"Empresa actualizado"}),this.empresa={},this.empresasGet()})).catch((e=>{this.loading=!1,this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al actualizar usuario"})}))},empresasGet(){this.$q.loading.show(),this.$api.get("empresa").then((e=>{this.empresas=e.data,this.$q.loading.hide()}))},empresaCreate(){this.empresaCrear?(this.loading=!0,this.$api.post("empresa",this.empresa).then((e=>{this.empresasGet(),this.showAddUserDialog=!1,this.empresa={},this.loading=!1})).catch((e=>{this.loading=!1,this.$q.notify({color:"negative",message:e.response.data.message,icon:"report_problem",position:"top"})}))):(this.loading=!0,this.$api.put("empresa/"+this.empresa.id,this.empresa).then((e=>{this.empresasGet(),this.showAddUserDialog=!1,this.empresa={},this.loading=!1})).catch((e=>{this.loading=!1,this.$q.notify({color:"negative",message:e.response.data.message,icon:"report_problem",position:"top"})})))},empresaEdit(e){this.empresa=e,this.empresaCrear=!1,this.showUpdateUserDialog=!0},updatePassword(e){this.$q.dialog({title:"Cambiar contraseña",message:"Ingrese la nueva contraseña",prompt:{model:"",type:"password"},cancel:!0,persistent:!0}).onOk((a=>{this.$api.put(`updatePassword/${e.id}`,{password:a}).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"check_circle",position:"top",message:"Contraseña actualizada"})})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",position:"top",message:e.response.data.message})}))})).onCancel((()=>{console.log("Cancel")})).onDismiss((()=>{console.log("Dismissed")}))},empresaDelete(e){this.$q.dialog({title:"Eliminar",message:"¿Está seguro de eliminar el usuario?",ok:"Si",cancel:"No"}).onOk((()=>{this.$q.loading.show(),this.$api.delete("empresa/"+e.id).then((e=>{this.empresasGet()}))}))}},created(){this.empresasGet()}};var K=t(7580),ee=t(1663),ae=t(7220),te=t(990),le=t(2074),oe=t(7887);const ie=(0,d.Z)(X,[["render",J]]),re=ie;L()(X,"components",{QPage:O.Z,QTable:K.Z,QToolbar:ee.Z,QBtn:G.Z,QInput:R.Z,QTd:ae.Z,QBadge:te.Z,QDialog:le.Z,QCard:Z.Z,QCardSection:P.Z,QForm:Q.Z,QSelect:oe.Z});const se=(0,r._)("div",{class:"text-h6"},"Agregar Contratista",-1),ne=(0,r._)("div",{class:"text-h6"},"Agregar Contratista",-1);function de(e,a,t,o,i,s){const n=(0,r.up)("q-btn"),d=(0,r.up)("q-input"),u=(0,r.up)("q-toolbar"),c=(0,r.up)("q-badge"),m=(0,r.up)("q-td"),p=(0,r.up)("q-table"),h=(0,r.up)("q-card-section"),g=(0,r.up)("q-form"),b=(0,r.up)("q-card"),w=(0,r.up)("q-dialog"),f=(0,r.up)("q-page");return(0,r.wg)(),(0,r.j4)(f,null,{default:(0,r.w5)((()=>[(0,r.Wm)(p,{rows:i.contratistas,columns:i.contratistaColums,filter:i.search},{"top-right":(0,r.w5)((()=>[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Wm)(n,{flat:"",icon:"add_circle_outline",onClick:a[0]||(a[0]=e=>{i.showAddUserDialog=!0,i.contratistaCrear=!0})}),(0,r.Wm)(d,{modelValue:i.search,"onUpdate:modelValue":a[1]||(a[1]=e=>i.search=e),outlined:"",dense:"",placeholder:"Buscar..."},null,8,["modelValue"])])),_:1})])),"body-cell-estado":(0,r.w5)((e=>[(0,r.Wm)(m,{props:e,"auto-width":""},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{dense:"","text-color":"white",color:"Activo"==e.row.estado?"green":"red"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,F.zw)(e.row.estado),1)])),_:2},1032,["color"])])),_:2},1032,["props"])])),"body-cell-option":(0,r.w5)((e=>[(0,r.Wm)(m,{props:e,"auto-width":""},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{flat:"",dense:"",icon:"o_edit",onClick:a=>s.contratistaEdit(e.row)},null,8,["onClick"]),(0,r.Wm)(n,{flat:"",dense:"",icon:"o_delete",onClick:a=>s.contratistaDelete(e.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"]),(0,r.Wm)(w,{modelValue:i.showAddUserDialog,"onUpdate:modelValue":a[7]||(a[7]=e=>i.showAddUserDialog=e)},{default:(0,r.w5)((()=>[(0,r.Wm)(b,{style:{width:"700px","max-width":"85vw"}},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{class:"row items-center"},{default:(0,r.w5)((()=>[se])),_:1}),(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Wm)(g,{onSubmit:(0,l.iM)(s.contratistaCreate,["prevent"])},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{modelValue:i.contratista.nombre,"onUpdate:modelValue":a[2]||(a[2]=e=>i.contratista.nombre=e),hint:"",required:"",outlined:"",label:"Nombre"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.contratista.telefono,"onUpdate:modelValue":a[3]||(a[3]=e=>i.contratista.telefono=e),hint:"",required:"",outlined:"",label:"Telefono"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.contratista.celular,"onUpdate:modelValue":a[4]||(a[4]=e=>i.contratista.celular=e),hint:"",required:"",outlined:"",label:"Celular"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.contratista.direccion,"onUpdate:modelValue":a[5]||(a[5]=e=>i.contratista.direccion=e),hint:"",required:"",outlined:"",label:"Direccion"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.contratista.ci,"onUpdate:modelValue":a[6]||(a[6]=e=>i.contratista.ci=e),hint:"",required:"",outlined:"",label:"CI"},null,8,["modelValue"]),(0,r.Wm)(n,{loading:i.loading,type:"submit",color:"primary",icon:"add_circle_outline",label:"Guardar",class:"full-width"},null,8,["loading"])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.Wm)(w,{modelValue:i.showUpdateUserDialog,"onUpdate:modelValue":a[13]||(a[13]=e=>i.showUpdateUserDialog=e)},{default:(0,r.w5)((()=>[(0,r.Wm)(b,{style:{width:"700px","max-width":"85vw"}},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{class:"row items-center"},{default:(0,r.w5)((()=>[ne])),_:1}),(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Wm)(g,{onSubmit:(0,l.iM)(s.contratistaUpdate,["prevent"])},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{modelValue:i.contratista.nombre,"onUpdate:modelValue":a[8]||(a[8]=e=>i.contratista.nombre=e),hint:"",required:"",outlined:"",label:"Nombre"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.contratista.telefono,"onUpdate:modelValue":a[9]||(a[9]=e=>i.contratista.telefono=e),hint:"",required:"",outlined:"",label:"Telefono"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.contratista.celular,"onUpdate:modelValue":a[10]||(a[10]=e=>i.contratista.celular=e),hint:"",required:"",outlined:"",label:"Celular"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.contratista.direccion,"onUpdate:modelValue":a[11]||(a[11]=e=>i.contratista.direccion=e),hint:"",required:"",outlined:"",label:"Direccion"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.contratista.ci,"onUpdate:modelValue":a[12]||(a[12]=e=>i.contratista.ci=e),hint:"",required:"",outlined:"",label:"CI"},null,8,["modelValue"]),(0,r.Wm)(n,{loading:i.loading,type:"submit",color:"primary",icon:"add_circle_outline",label:"Guardar",class:"full-width"},null,8,["loading"])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}const ue={name:"User",data(){return{roles:["INSCRIPCION","ACREDITACION","REFRIGERIO","ADMINISTRADOR"],showAddUserDialog:!1,showUpdateUserDialog:!1,search:"",contratistas:[],contratista:{},loading:!1,contratistaCrear:!0,contratistaColums:[{name:"option",field:"option",label:"Opciones",align:"left",sortable:!0},{name:"estado",field:"estado",label:"Estado",align:"left",sortable:!0},{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"nombre",label:"Nombre",field:"nombre",align:"left",sortable:!0},{name:"telefono",label:"Telefono",field:"telefono",align:"left",sortable:!0},{name:"celular",label:"Celular",field:"celular",align:"left",sortable:!0},{name:"direccion",label:"Direccion",field:"direccion",align:"left",sortable:!0},{name:"ci",label:"CI",field:"ci",align:"left",sortable:!0}]}},methods:{contratistaUpdate(){this.loading=!0,this.$api.put(`contratista/${this.contratista.id}`,this.contratista).then((e=>{console.log(e.data),this.loading=!1,this.showUpdateUserDialog=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"check_circle",message:"Contratista actualizado"}),this.contratista={},this.contratistasGet()})).catch((e=>{this.loading=!1,this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al actualizar usuario"})}))},contratistasGet(){this.$q.loading.show(),this.$api.get("contratista").then((e=>{this.contratistas=e.data,this.$q.loading.hide()}))},contratistaCreate(){this.contratistaCrear?(this.loading=!0,this.$api.post("contratista",this.contratista).then((e=>{this.contratistasGet(),this.showAddUserDialog=!1,this.contratista={},this.loading=!1})).catch((e=>{this.loading=!1,this.$q.notify({color:"negative",message:e.response.data.message,icon:"report_problem",position:"top"})}))):(this.loading=!0,this.$api.put("contratista/"+this.contratista.id,this.contratista).then((e=>{this.contratistasGet(),this.showAddUserDialog=!1,this.contratista={},this.loading=!1})).catch((e=>{this.loading=!1,this.$q.notify({color:"negative",message:e.response.data.message,icon:"report_problem",position:"top"})})))},contratistaEdit(e){this.contratista=e,this.contratistaCrear=!1,this.showUpdateUserDialog=!0},updatePassword(e){this.$q.dialog({title:"Cambiar contraseña",message:"Ingrese la nueva contraseña",prompt:{model:"",type:"password"},cancel:!0,persistent:!0}).onOk((a=>{this.$api.put(`updatePassword/${e.id}`,{password:a}).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"check_circle",position:"top",message:"Contraseña actualizada"})})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",position:"top",message:e.response.data.message})}))})).onCancel((()=>{console.log("Cancel")})).onDismiss((()=>{console.log("Dismissed")}))},contratistaDelete(e){this.$q.dialog({title:"Eliminar",message:"¿Está seguro de eliminar el usuario?",ok:"Si",cancel:"No"}).onOk((()=>{this.$q.loading.show(),this.$api.delete("contratista/"+e.id).then((e=>{this.contratistasGet()}))}))}},created(){this.contratistasGet()}},ce=(0,d.Z)(ue,[["render",de]]),me=ce;L()(ue,"components",{QPage:O.Z,QTable:K.Z,QToolbar:ee.Z,QBtn:G.Z,QInput:R.Z,QTd:ae.Z,QBadge:te.Z,QDialog:le.Z,QCard:Z.Z,QCardSection:P.Z,QForm:Q.Z});const pe=(0,r._)("div",{class:"text-h6"},"Agregar Transporte",-1),he=(0,r._)("div",{class:"text-h6"},"Agregar Transporte",-1);function ge(e,a,t,o,i,s){const n=(0,r.up)("q-btn"),d=(0,r.up)("q-input"),u=(0,r.up)("q-toolbar"),c=(0,r.up)("q-badge"),m=(0,r.up)("q-td"),p=(0,r.up)("q-table"),h=(0,r.up)("q-card-section"),g=(0,r.up)("q-form"),b=(0,r.up)("q-card"),w=(0,r.up)("q-dialog"),f=(0,r.up)("q-page");return(0,r.wg)(),(0,r.j4)(f,null,{default:(0,r.w5)((()=>[(0,r.Wm)(p,{rows:i.transportes,columns:i.transporteColums,filter:i.search},{"top-right":(0,r.w5)((()=>[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Wm)(n,{flat:"",icon:"add_circle_outline",onClick:a[0]||(a[0]=e=>{i.showAddUserDialog=!0,i.transporteCrear=!0})}),(0,r.Wm)(d,{modelValue:i.search,"onUpdate:modelValue":a[1]||(a[1]=e=>i.search=e),outlined:"",dense:"",placeholder:"Buscar..."},null,8,["modelValue"])])),_:1})])),"body-cell-estado":(0,r.w5)((e=>[(0,r.Wm)(m,{props:e,"auto-width":""},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{dense:"","text-color":"white",color:"Activo"==e.row.estado?"green":"red"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,F.zw)(e.row.estado),1)])),_:2},1032,["color"])])),_:2},1032,["props"])])),"body-cell-option":(0,r.w5)((e=>[(0,r.Wm)(m,{props:e,"auto-width":""},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{flat:"",dense:"",icon:"o_edit",onClick:a=>s.transporteEdit(e.row)},null,8,["onClick"]),(0,r.Wm)(n,{flat:"",dense:"",icon:"o_delete",onClick:a=>s.transporteDelete(e.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"]),(0,r.Wm)(w,{modelValue:i.showAddUserDialog,"onUpdate:modelValue":a[6]||(a[6]=e=>i.showAddUserDialog=e)},{default:(0,r.w5)((()=>[(0,r.Wm)(b,{style:{width:"700px","max-width":"85vw"}},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{class:"row items-center"},{default:(0,r.w5)((()=>[pe])),_:1}),(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Wm)(g,{onSubmit:(0,l.iM)(s.transporteCreate,["prevent"])},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{modelValue:i.transporte.tipo,"onUpdate:modelValue":a[2]||(a[2]=e=>i.transporte.tipo=e),hint:"",required:"",outlined:"",label:"Tipo"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.transporte.marca,"onUpdate:modelValue":a[3]||(a[3]=e=>i.transporte.marca=e),hint:"",required:"",outlined:"",label:"Marca"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.transporte.placa,"onUpdate:modelValue":a[4]||(a[4]=e=>i.transporte.placa=e),hint:"",required:"",outlined:"",label:"Placa"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.transporte.color,"onUpdate:modelValue":a[5]||(a[5]=e=>i.transporte.color=e),hint:"",required:"",outlined:"",label:"Color"},null,8,["modelValue"]),(0,r.Wm)(n,{loading:i.loading,type:"submit",color:"primary",icon:"add_circle_outline",label:"Guardar",class:"full-width"},null,8,["loading"])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.Wm)(w,{modelValue:i.showUpdateUserDialog,"onUpdate:modelValue":a[11]||(a[11]=e=>i.showUpdateUserDialog=e)},{default:(0,r.w5)((()=>[(0,r.Wm)(b,{style:{width:"700px","max-width":"85vw"}},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{class:"row items-center"},{default:(0,r.w5)((()=>[he])),_:1}),(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Wm)(g,{onSubmit:(0,l.iM)(s.transporteUpdate,["prevent"])},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{modelValue:i.transporte.tipo,"onUpdate:modelValue":a[7]||(a[7]=e=>i.transporte.tipo=e),hint:"",required:"",outlined:"",label:"Tipo"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.transporte.marca,"onUpdate:modelValue":a[8]||(a[8]=e=>i.transporte.marca=e),hint:"",required:"",outlined:"",label:"Marca"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.transporte.placa,"onUpdate:modelValue":a[9]||(a[9]=e=>i.transporte.placa=e),hint:"",required:"",outlined:"",label:"Placa"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.transporte.color,"onUpdate:modelValue":a[10]||(a[10]=e=>i.transporte.color=e),hint:"",required:"",outlined:"",label:"Color"},null,8,["modelValue"]),(0,r.Wm)(n,{loading:i.loading,type:"submit",color:"primary",icon:"add_circle_outline",label:"Guardar",class:"full-width"},null,8,["loading"])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}const be={name:"Transporte",data(){return{roles:["INSCRIPCION","ACREDITACION","REFRIGERIO","ADMINISTRADOR"],showAddUserDialog:!1,showUpdateUserDialog:!1,search:"",transportes:[],transporte:{},loading:!1,transporteCrear:!0,transporteColums:[{name:"option",field:"option",label:"Opciones",align:"left",sortable:!0},{name:"estado",field:"estado",label:"Estado",align:"left",sortable:!0},{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"tipo",label:"Tipo",field:"tipo",align:"left",sortable:!0},{name:"marca",label:"Marca",field:"marca",align:"left",sortable:!0},{name:"placa",label:"Placa",field:"placa",align:"left",sortable:!0},{name:"color",label:"Color",field:"color",align:"left",sortable:!0}]}},methods:{transporteUpdate(){this.loading=!0,this.$api.put(`transporte/${this.transporte.id}`,this.transporte).then((e=>{this.loading=!1,this.showUpdateUserDialog=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"check_circle",message:"Transporte actualizado"}),this.transporte={},this.transportesGet()})).catch((e=>{this.loading=!1,this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al actualizar usuario"})}))},transportesGet(){this.$q.loading.show(),this.$api.get("transporte").then((e=>{this.transportes=e.data,this.$q.loading.hide()}))},transporteCreate(){this.transporteCrear?(this.loading=!0,this.$api.post("transporte",this.transporte).then((e=>{this.transportesGet(),this.showAddUserDialog=!1,this.transporte={},this.loading=!1})).catch((e=>{this.loading=!1,this.$q.notify({color:"negative",message:e.response.data.message,icon:"report_problem",position:"top"})}))):(this.loading=!0,this.$api.put("transporte/"+this.transporte.id,this.transporte).then((e=>{this.transportesGet(),this.showAddUserDialog=!1,this.transporte={},this.loading=!1})).catch((e=>{this.loading=!1,this.$q.notify({color:"negative",message:e.response.data.message,icon:"report_problem",position:"top"})})))},transporteEdit(e){this.transporte=e,this.transporteCrear=!1,this.showUpdateUserDialog=!0},updatePassword(e){this.$q.dialog({title:"Cambiar contraseña",message:"Ingrese la nueva contraseña",prompt:{model:"",type:"password"},cancel:!0,persistent:!0}).onOk((a=>{this.$api.put(`updatePassword/${e.id}`,{password:a}).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"check_circle",position:"top",message:"Contraseña actualizada"})})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",position:"top",message:e.response.data.message})}))})).onCancel((()=>{console.log("Cancel")})).onDismiss((()=>{console.log("Dismissed")}))},transporteDelete(e){this.$q.dialog({title:"Eliminar",message:"¿Está seguro de eliminar el usuario?",ok:"Si",cancel:"No"}).onOk((()=>{this.$q.loading.show(),this.$api.delete("transporte/"+e.id).then((e=>{this.transportesGet()}))}))}},created(){this.transportesGet()}},we=(0,d.Z)(be,[["render",ge]]),fe=we;L()(be,"components",{QPage:O.Z,QTable:K.Z,QToolbar:ee.Z,QBtn:G.Z,QInput:R.Z,QTd:ae.Z,QBadge:te.Z,QDialog:le.Z,QCard:Z.Z,QCardSection:P.Z,QForm:Q.Z});const ve={class:"text-h6"},_e={class:"row"},Ce={class:"col-12 col-sm-6"},Ve={class:"col-12 col-sm-6"},qe=(0,r._)("div",{class:"text-subtitle2"},"PROPIETARIO DEL MINERAL",-1),We={class:"row"},Ue={class:"col-12 col-sm-6"},ye={class:"col-12 col-sm-6"},De=(0,r._)("div",{class:"text-subtitle2"},"PROCEDENCIA",-1),Ae={class:"row"},$e={class:"col-12 col-sm-4"},ke={class:"col-12 col-sm-4"},Ie={class:"col-12 col-sm-4"},Te=(0,r._)("div",{class:"text-subtitle2"},"MEDIO DE TRANSPORTE",-1),Ee={class:"row"},xe={class:"col-12 col-sm-6"},Se={class:"col-12 col-sm-6"},Oe=(0,r._)("div",{class:"text-subtitle2"},"TIPO DE MATERIAL",-1),Ze={class:"row"},Pe={class:"col-12 col-sm-6"},Qe=(0,r._)("div",{class:"text-bold"},"Tipo de Material:",-1),Re={class:"col-12 col-sm-6"},Ne=(0,r._)("div",{class:"text-bold"},"Minerales:",-1),Me={class:"col-12 col-sm-6"},Ge={class:"col-12 col-sm-6"},Be=(0,r._)("div",{class:"text-h6"},"Generacion de Tornaguia o Cartaporte",-1),Le=(0,r._)("div",{id:"myelement",class:"hidden"},null,-1);function ze(e,a,t,o,i,s){const n=(0,r.up)("q-btn"),d=(0,r.up)("q-input"),u=(0,r.up)("q-toolbar"),c=(0,r.up)("q-badge"),m=(0,r.up)("q-td"),p=(0,r.up)("q-icon"),h=(0,r.up)("q-item-section"),g=(0,r.up)("q-item"),b=(0,r.up)("q-list"),w=(0,r.up)("q-btn-dropdown"),f=(0,r.up)("q-table"),v=(0,r.up)("q-card-section"),_=(0,r.up)("q-select"),C=(0,r.up)("q-radio"),V=(0,r.up)("q-checkbox"),q=(0,r.up)("q-card"),W=(0,r.up)("q-form"),U=(0,r.up)("q-dialog"),y=(0,r.up)("q-page"),D=(0,r.Q2)("close-popup");return(0,r.wg)(),(0,r.j4)(y,null,{default:(0,r.w5)((()=>[(0,r.Wm)(f,{rows:i.tornaguias,columns:i.tornaguiaColums,filter:i.search},{"top-right":(0,r.w5)((()=>[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Wm)(n,{color:"primary",label:"Crear tornagia",icon:"add_circle_outline",onClick:s.tornaguiaClick},null,8,["onClick"]),(0,r.Wm)(d,{modelValue:i.search,"onUpdate:modelValue":a[0]||(a[0]=e=>i.search=e),outlined:"",dense:"",placeholder:"Buscar..."},null,8,["modelValue"])])),_:1})])),"body-cell-tipoMaterial":(0,r.w5)((e=>[(0,r.Wm)(m,{props:e,"auto-width":""},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{dense:"","text-color":"white",color:"Embolsado"==e.row.tipoMaterial?"green":"red"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,F.zw)(e.row.tipoMaterial),1)])),_:2},1032,["color"])])),_:2},1032,["props"])])),"body-cell-option":(0,r.w5)((e=>[(0,r.Wm)(m,{props:e,"auto-width":""},{default:(0,r.w5)((()=>[(0,r.Wm)(w,{color:"primary",label:"Opciones"},{default:(0,r.w5)((()=>[(0,r.Wm)(b,null,{default:(0,r.w5)((()=>[(0,r.wy)(((0,r.wg)(),(0,r.j4)(g,{clickable:"",onClick:a=>s.ver(e.row)},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{avatar:""},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{name:"edit"})])),_:1}),(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Modificar")])),_:1})])),_:2},1032,["onClick"])),[[D]]),(0,r.wy)(((0,r.wg)(),(0,r.j4)(g,{clickable:"",onClick:a=>s.print(e.row)},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{avatar:""},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{name:"print"})])),_:1}),(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Imprimir")])),_:1})])),_:2},1032,["onClick"])),[[D]])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"]),(0,r.Wm)(U,{modelValue:i.showAddTornaguiaDialog,"onUpdate:modelValue":a[19]||(a[19]=e=>i.showAddTornaguiaDialog=e),"full-width":""},{default:(0,r.w5)((()=>[(0,r.Wm)(q,null,{default:(0,r.w5)((()=>[(0,r.Wm)(v,{class:"row items-center q-pb-none"},{default:(0,r.w5)((()=>[(0,r._)("div",ve,(0,F.zw)(i.tornaguiaCrear?"Generacion de":"Modificar")+" Tornaguia o Cartaporte",1)])),_:1}),(0,r.Wm)(v,{class:"q-pt-none"},{default:(0,r.w5)((()=>[(0,r.Wm)(W,{onSubmit:(0,l.iM)(s.tornaguiaCreate,["prevent"])},{default:(0,r.w5)((()=>[(0,r.Wm)(q,null,{default:(0,r.w5)((()=>[(0,r.Wm)(v,null,{default:(0,r.w5)((()=>[(0,r._)("div",_e,[(0,r._)("div",Ce,[(0,r.Wm)(d,{modelValue:i.tornaguia.fecha,"onUpdate:modelValue":a[1]||(a[1]=e=>i.tornaguia.fecha=e),type:"date",label:`Fecha: ${i.tornaguia.fecha} `,outlined:"",dense:""},null,8,["modelValue","label"])]),(0,r._)("div",Ve,[(0,r.Wm)(d,{modelValue:i.tornaguia.numero,"onUpdate:modelValue":a[2]||(a[2]=e=>i.tornaguia.numero=e),type:"number",label:"Número Asignado:",outlined:"",dense:""},null,8,["modelValue"])])])])),_:1}),(0,r.Wm)(v,{class:"bg-primary text-white q-pa-xs"},{default:(0,r.w5)((()=>[qe])),_:1}),(0,r.Wm)(v,null,{default:(0,r.w5)((()=>[(0,r._)("div",We,[(0,r._)("div",Ue,[(0,r.Wm)(_,{modelValue:i.tornaguia.empresas,"onUpdate:modelValue":a[3]||(a[3]=e=>i.tornaguia.empresas=e),rules:[(e,a)=>!!e||"Porfavor registrar dato"],required:"",options:i.empresas,label:"Empresa Destiono:",outlined:"",dense:""},null,8,["modelValue","rules","options"])]),(0,r._)("div",ye,[(0,r.Wm)(_,{modelValue:i.tornaguia.contratistas,"onUpdate:modelValue":a[4]||(a[4]=e=>i.tornaguia.contratistas=e),rules:[e=>!!e||"Porfavor registrar dato"],required:"",options:i.contratistas,label:"Contratista:",outlined:"",dense:""},null,8,["modelValue","rules","options"])])])])),_:1}),(0,r.Wm)(v,{class:"bg-primary text-white q-pa-xs"},{default:(0,r.w5)((()=>[De])),_:1}),(0,r.Wm)(v,null,{default:(0,r.w5)((()=>[(0,r._)("div",Ae,[(0,r._)("div",$e,[(0,r.Wm)(d,{modelValue:i.tornaguia.yacimiento,"onUpdate:modelValue":a[5]||(a[5]=e=>i.tornaguia.yacimiento=e),label:"Yacimiento:",outlined:"",dense:""},null,8,["modelValue"])]),(0,r._)("div",ke,[(0,r.Wm)(d,{modelValue:i.tornaguia.tranca,"onUpdate:modelValue":a[6]||(a[6]=e=>i.tornaguia.tranca=e),label:"Tranca:",outlined:"",dense:""},null,8,["modelValue"])]),(0,r._)("div",Ie,[(0,r.Wm)(d,{modelValue:i.tornaguia.cuadrilla,"onUpdate:modelValue":a[7]||(a[7]=e=>i.tornaguia.cuadrilla=e),label:"Cuadrilla:",outlined:"",dense:""},null,8,["modelValue"])])])])),_:1}),(0,r.Wm)(v,{class:"bg-primary text-white q-pa-xs"},{default:(0,r.w5)((()=>[Te])),_:1}),(0,r.Wm)(v,null,{default:(0,r.w5)((()=>[(0,r._)("div",Ee,[(0,r._)("div",xe,[(0,r.Wm)(_,{modelValue:i.tornaguia.transportes,"onUpdate:modelValue":a[8]||(a[8]=e=>i.tornaguia.transportes=e),rules:[e=>!!e||"Porfavor registrar dato"],required:"",options:i.transportes,label:"Transporte:",outlined:"",dense:""},null,8,["modelValue","rules","options"])]),(0,r._)("div",Se,[(0,r.Wm)(_,{modelValue:i.tornaguia.drivers,"onUpdate:modelValue":a[9]||(a[9]=e=>i.tornaguia.drivers=e),rules:[e=>!!e||"Porfavor registrar dato"],required:"",options:i.drivers,label:"Conductor:",outlined:"",dense:""},null,8,["modelValue","rules","options"])])])])),_:1}),(0,r.Wm)(v,{class:"bg-primary text-white q-pa-xs"},{default:(0,r.w5)((()=>[Oe])),_:1}),(0,r.Wm)(v,null,{default:(0,r.w5)((()=>[(0,r._)("div",Ze,[(0,r._)("div",Pe,[Qe,(0,r.Wm)(C,{modelValue:i.tornaguia.tipoMaterial,"onUpdate:modelValue":a[10]||(a[10]=e=>i.tornaguia.tipoMaterial=e),val:"Mineral",label:"Mineral"},null,8,["modelValue"]),(0,r.Wm)(C,{modelValue:i.tornaguia.tipoMaterial,"onUpdate:modelValue":a[11]||(a[11]=e=>i.tornaguia.tipoMaterial=e),val:"Embolsado",label:"Embolsado"},null,8,["modelValue"])]),(0,r._)("div",Re,[Ne,(0,r.Wm)(V,{modelValue:i.tornaguia.mineralesSel,"onUpdate:modelValue":a[12]||(a[12]=e=>i.tornaguia.mineralesSel=e),val:"Sn",label:"Sn"},null,8,["modelValue"]),(0,r.Wm)(V,{modelValue:i.tornaguia.mineralesSel,"onUpdate:modelValue":a[13]||(a[13]=e=>i.tornaguia.mineralesSel=e),val:"Ag",label:"Ag"},null,8,["modelValue"]),(0,r.Wm)(V,{modelValue:i.tornaguia.mineralesSel,"onUpdate:modelValue":a[14]||(a[14]=e=>i.tornaguia.mineralesSel=e),val:"Pb",label:"Pb"},null,8,["modelValue"]),(0,r.Wm)(V,{modelValue:i.tornaguia.mineralesSel,"onUpdate:modelValue":a[15]||(a[15]=e=>i.tornaguia.mineralesSel=e),val:"Zn",label:"Zn"},null,8,["modelValue"]),(0,r.Wm)(V,{modelValue:i.tornaguia.mineralesSel,"onUpdate:modelValue":a[16]||(a[16]=e=>i.tornaguia.mineralesSel=e),val:"Otros",label:"Otros"},null,8,["modelValue"])]),(0,r._)("div",Me,[(0,r.Wm)(d,{modelValue:i.tornaguia.peso,"onUpdate:modelValue":a[17]||(a[17]=e=>i.tornaguia.peso=e),type:"number",label:"Peso en Tn.:",outlined:"",dense:""},null,8,["modelValue"])]),(0,r._)("div",Ge,[(0,r.Wm)(d,{modelValue:i.tornaguia.sacos,"onUpdate:modelValue":a[18]||(a[18]=e=>i.tornaguia.sacos=e),type:"number",label:"Cantidad de Sacos:",outlined:"",dense:""},null,8,["modelValue"])])])])),_:1})])),_:1}),(0,r.Wm)(n,{loading:i.loading,type:"submit",color:"primary",icon:"add_circle_outline",label:i.tornaguiaCrear?"Guardar":"Modificar",class:"full-width"},null,8,["loading","label"])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.Wm)(U,{modelValue:i.showUpdateTornaguiaDialog,"onUpdate:modelValue":a[24]||(a[24]=e=>i.showUpdateTornaguiaDialog=e)},{default:(0,r.w5)((()=>[(0,r.Wm)(q,{class:"full-width"},{default:(0,r.w5)((()=>[(0,r.Wm)(v,{class:"row items-center"},{default:(0,r.w5)((()=>[Be])),_:1}),(0,r.Wm)(v,null,{default:(0,r.w5)((()=>[(0,r.Wm)(W,{onSubmit:(0,l.iM)(s.tornaguiaUpdate,["prevent"])},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{modelValue:i.tornaguia.nombre,"onUpdate:modelValue":a[20]||(a[20]=e=>i.tornaguia.nombre=e),hint:"",required:"",outlined:"",label:"Nombre"},null,8,["modelValue"]),(0,r.Wm)(_,{modelValue:i.tornaguia.ciudad,"onUpdate:modelValue":a[21]||(a[21]=e=>i.tornaguia.ciudad=e),hint:"",required:"",outlined:"",label:"Ciudad",options:["ORURO","LA PAZ","COCHABAMBA","SANTA CRUZ","POTOSI","TARIJA","CHUQUISACA","BENI","PANDO"]},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.tornaguia.telefono,"onUpdate:modelValue":a[22]||(a[22]=e=>i.tornaguia.telefono=e),hint:"",required:"",outlined:"",label:"Telefono"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.tornaguia.nit,"onUpdate:modelValue":a[23]||(a[23]=e=>i.tornaguia.nit=e),hint:"",required:"",outlined:"",label:"NIT"},null,8,["modelValue"]),(0,r.Wm)(n,{loading:i.loading,type:"submit",color:"primary",icon:"add_circle_outline",label:"Guardar",class:"full-width"},null,8,["loading"])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),Le])),_:1})}var je=t(4376),Fe=t(2995),Ye=t(2316);const He={name:"Tornaguia",data(){return{store:(0,T.A)(),roles:["INSCRIPCION","ACREDITACION","REFRIGERIO","ADMINISTRADOR"],shape:[],showAddTornaguiaDialog:!1,showUpdateTornaguiaDialog:!1,search:"",tornaguias:[],tornaguia:{fecha:je.ZP.formatDate(new Date,"YYYY-MM-DD"),mineralesSel:[]},loading:!1,tornaguiaCrear:!0,empresas:[],contratistas:[],transportes:[],drivers:[],tornaguiaColums:[{name:"option",field:"option",label:"Opciones",align:"left",sortable:!0},{name:"id",field:"id",label:"No.",align:"left",sortable:!0},{name:"fecha",field:"fecha",label:"Fecha",align:"left",sortable:!0},{name:"empresa",label:"Empresa destino",field:e=>e.empresa.nombre,align:"left",sortable:!0},{name:"contratista",label:"Contratista",field:e=>e.contratista.nombre,align:"left",sortable:!0},{name:"minerales",label:"Minerales",field:"minerales",align:"left",sortable:!0},{name:"tipoMaterial",label:"Tipo Material",field:"tipoMaterial",align:"left",sortable:!0},{name:"transporte",label:"Transporte",field:e=>e.transporte.placa,align:"left",sortable:!0},{name:"conductor",label:"Conductor",field:e=>e.driver.name,align:"left",sortable:!0},{name:"user",label:"Usuario",field:e=>e.user.name,align:"left",sortable:!0}]}},mounted(){this.tornaguiasGet(),this.$api.get("empresa").then((e=>{e.data.forEach((e=>{this.empresas.push({label:e.nombre,value:e.id})}))})),this.$api.get("contratista").then((e=>{e.data.forEach((e=>{this.contratistas.push({label:e.nombre,value:e.id})}))})),this.$api.get("transporte").then((e=>{e.data.forEach((e=>{this.transportes.push({label:e.placa,value:e.id})}))})),this.$api.get("driver").then((e=>{e.data.forEach((e=>{this.drivers.push({label:e.name,value:e.id})}))}))},methods:{print(e){e.id=e.id.toString().padStart(6,"0");const a=new Fe.gR;Ye.toDataURL(e.id+"-"+e.driver.name).then((t=>{document.getElementById("myelement").innerHTML=`\n<style>\n  .center {\n    text-align: center;\n  }\n  .border{\n    border: 1px solid #70A89F;\n  }\n  .color{\n    color: #70A89F;\n  }\n  .white{\n    color: #fff;\n  }\n  .bold{\n    font-weight: bold;\n  }\n  .width-100{\n    width: 100%;\n  }\n  .width-50{\n    width: 50%;\n  }\n    .width-25{\n    width: 25%;\n  }\n\n  .black{\n    color: black;\n  }\n  .red{\n    color: #ce1212;\n  }\n  .h1{\n    font-size: 1.5rem;\n  }\n  .h2{\n    font-size: 1.3rem;\n  }\n  .h3{\n    font-size: 1.2rem;\n  }\n  .h4{\n    font-size: 1rem;\n  }\n  .h5{\n    font-size: 0.8rem;\n  }\n  .background{\n    background-color: #E4EBF5;\n  }\n  .background-black{\n    background-color: #639F93;\n  }\n\n</style>\n<table class="border" style="border-collapse: collapse" width="100%">\n  <tr>\n    <td class="center border"><img src="logo1.png" alt="logo1" width="50px"></td>\n    <td class="center border color ">\n    <div class="bold h1">Cooperativa Minera "POOPO" R.L.</div>\n    <div class="h5">Personaria Juridica No. 487 - Fiche de REgistro No. 464 NIT 1023457027</div>\n    <div class="h5">Cel. 72318861-71852849-72467605-71101685</div>\n    <div class="h5">Poopo-Oruro-Bolivia</div>\n    </td>\n    <td class="center border"><img src="logo.png" alt="logo1" width="50px"></td>\n  </tr>\n  <tr>\n    <td class="center border" colspan="3">\n      <div class="bold h2 color background">TORNAGUIA O CARTA PORTE</div>\n    </td>\n</tr>\n</table>\n<table class="width-100">\n  <tr>\n    <td class="border width-50">\n      <small class="bold h4 color">Fecha:</small><small class="black"> ${e.fecha} </small>\n    </td>\n    <td class="border width-50">\n      <small class="bold h4 color">No:</small><small class="red"> ${e.id}</small>\n    </td>\n   </tr>\n   <tr>\n    <td class="border center white background-black">\n      PROCEDENCIA\n    </td>\n    <td class="border center white background-black">\n      PROPIETARIO DEL MINERAL\n    </td>\n</tr>\n  <tr>\n    <td class="border width-50">\n      <div><small class="bold h4 color">Departamento:</small><small class="color"> Oruro Minicipio: Poopo </small></div>\n      <div><small class="bold h4 color">Yacimiento:</small><small class="black"> ${e.yacimiento}</small></div>\n      <div><small class="bold h4 color">Cuadrilla:</small><small class="black"> ${e.cuadrilla}</small></div>\n      <div><small class="bold h4 color">Tranca de control:</small><small class="black"> ${e.tranca}</small></div>\n    </td>\n    <td class="border width-50">\n      <div><small class="bold h4 color">Cooperativa Minera Poopo R.L.:</small></div>\n      <div><small class="bold h4 color">Destino Empresa:</small><small class="black"> ${e.empresa.nombre}</small></div>\n      <div><small class="bold h4 color">Contratista:</small><small class="black"> ${e.contratista.nombre}</small></div>\n    </td>\n   </tr>\n      <tr>\n    <td class="border center white background-black">\n      MEDIO DE TRANSPORTE\n    </td>\n    <td class="border center white background-black">\n    TIPO DE MATERIAL\n    </td>\n</tr>\n  <tr>\n    <td class="border width-50">\n      <div><small class="bold h4 color">Tipo de transporte:</small><small class="black"> ${e.transporte.tipo} </small> <small class="bold h4 color">Marca:</small><small class="black"> ${e.transporte.marca} </small></div>\n      <div><small class="bold h4 color">Color:</small><small class="black"> ${e.transporte.color}</small><small class="bold h4 color">Placa:</small><small class="black"> ${e.transporte.placa}</small></div>\n      <div><small class="bold h4 color">Nombre del chofer:</small><small class="black"> ${e.driver.name}</small></div>\n      <div><small class="bold h4 color">Ci :</small><small class="black"> ${e.driver.licencia}</small></div>\n    </td>\n    <td class="border width-50">\n      <div><small class="bold h4 color">Tipo de Material:</small><small class="black">${e.tipoMaterial}</small></div>\n      <div><small class="bold h4 color">Minerales:</small><small class="black"> ${e.minerales}</small></div>\n      <div><small class="bold h4 color">Peso en Toneladas:</small><small class="black"> ${e.peso}</small></div>\n      <div><small class="bold h4 color">Cantidad de Sacos:</small><small class="black"> ${e.sacos}</small></div>\n      <div><small class="bold h4 color">No. de Lote:</small><small class="black"> </small></div>\n    </td>\n   </tr>\n</table>\n<table class="width-100">\n<tr valign="bottom">\n    <td class="width-25 border center color" >\n        <div class="h5">Presidente, Consejo de</div>\n        <div class="h5">Administracion</div>\n        <div class="h5">Sello, Nombre, C.I. y Firma</div>\n     </td>\n     <td class="width-25 border center color">\n        <div class="h5">Empresa Receptora</div>\n        <div class="h5">Sello y Firma</div>\n     </td>\n     <td class="width-25 border center color">\n        <div class="h5">Presidente, Consejo de</div>\n        <div class="h5">Vigilancia</div>\n        <div class="h5">Sello, Nombre, C.I. y Firma</div>\n     </td>\n     <td class="width-25 border center color">\n        <img src="${t}" alt="">\n     </td>\n</tr>\n</table>\n    `,a.print(document.getElementById("myelement"))})).catch((e=>{console.error(e)}))},ver(e){this.showAddTornaguiaDialog=!0,this.tornaguiaCrear=!1,this.tornaguia=e,this.tornaguia.transportes={label:e.transporte.placa,value:e.transporte.id},this.tornaguia.empresas={label:e.empresa.nombre,value:e.empresa.id},this.tornaguia.contratistas={label:e.contratista.nombre,value:e.contratista.id},this.tornaguia.drivers={label:e.driver.name,value:e.driver.id},this.tornaguia.mineralesSel=e.minerales.split(",")},tornaguiaUpdate(){this.loading=!0,this.$api.put(`tornaguia/${this.tornaguia.id}`,this.tornaguia).then((e=>{this.loading=!1,this.showUpdateTornaguiaDialog=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"check_circle",message:"Tornaguia actualizado"}),this.tornaguia={},this.tornaguiasGet()})).catch((e=>{this.loading=!1,this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al actualizar usuario"})}))},tornaguiasGet(){this.$q.loading.show(),this.$api.get("tornaguia").then((e=>{this.tornaguias=[],e.data.forEach((e=>{this.tornaguias.push(e)})),this.$q.loading.hide()}))},tornaguiaClick(){this.tornaguia={fecha:je.ZP.formatDate(new Date,"YYYY-MM-DD"),mineralesSel:[]},this.showAddTornaguiaDialog=!0,this.tornaguiaCrear=!0},tornaguiaCreate(){if(this.tornaguiaCrear){this.loading=!0,this.tornaguia.empresa_id=this.tornaguia.empresas.value,this.tornaguia.contratista_id=this.tornaguia.contratistas.value,this.tornaguia.transporte_id=this.tornaguia.transportes.value,this.tornaguia.driver_id=this.tornaguia.drivers.value,this.tornaguia.user_id=this.store.user.id;let e="";this.tornaguia.mineralesSel.forEach((a=>{e=e+a+","})),this.tornaguia.minerales=e,this.$api.post("tornaguia",this.tornaguia).then((e=>{this.tornaguiasGet(),this.showAddTornaguiaDialog=!1,this.tornaguia={fecha:je.ZP.formatDate(new Date,"YYYY-MM-DD"),mineralesSel:[]},this.loading=!1})).catch((e=>{this.loading=!1,this.$q.notify({color:"negative",message:e.response.data.message,icon:"report_problem",position:"top"})}))}else{this.loading=!0,this.tornaguia.empresa_id=this.tornaguia.empresas.value,this.tornaguia.contratista_id=this.tornaguia.contratistas.value,this.tornaguia.transporte_id=this.tornaguia.transportes.value,this.tornaguia.driver_id=this.tornaguia.drivers.value,this.tornaguia.user_id=this.store.user.id;let e="";this.tornaguia.mineralesSel.forEach((a=>{e=e+a+","})),this.tornaguia.minerales=e,this.$api.put("tornaguia/"+this.tornaguia.id,this.tornaguia).then((e=>{this.tornaguiasGet(),this.showAddTornaguiaDialog=!1,this.tornaguia={},this.loading=!1})).catch((e=>{this.loading=!1,this.$q.notify({color:"negative",message:e.response.data.message,icon:"report_problem",position:"top"})}))}},tornaguiaEdit(e){this.tornaguia=e,this.tornaguiaCrear=!1,this.showUpdateTornaguiaDialog=!0},updatePassword(e){this.$q.dialog({title:"Cambiar contraseña",message:"Ingrese la nueva contraseña",prompt:{model:"",type:"password"},cancel:!0,persistent:!0}).onOk((a=>{this.$api.put(`updatePassword/${e.id}`,{password:a}).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"check_circle",position:"top",message:"Contraseña actualizada"})})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",position:"top",message:e.response.data.message})}))})).onCancel((()=>{console.log("Cancel")})).onDismiss((()=>{console.log("Dismissed")}))},tornaguiaDelete(e){this.$q.dialog({title:"Eliminar",message:"¿Está seguro de eliminar el usuario?",ok:"Si",cancel:"No"}).onOk((()=>{this.$q.loading.show(),this.$api.delete("tornaguia/"+e.id).then((e=>{this.tornaguiasGet()}))}))}}};var Je=t(8479),Xe=t(3246),Ke=t(490),ea=t(1233),aa=t(1480),ta=t(2146);const la=(0,d.Z)(He,[["render",ze]]),oa=la;L()(He,"components",{QPage:O.Z,QTable:K.Z,QToolbar:ee.Z,QBtn:G.Z,QInput:R.Z,QTd:ae.Z,QBadge:te.Z,QBtnDropdown:Je.Z,QList:Xe.Z,QItem:Ke.Z,QItemSection:ea.Z,QIcon:N.Z,QDialog:le.Z,QCard:Z.Z,QCardSection:P.Z,QForm:Q.Z,QSelect:oe.Z,QRadio:aa.Z,QCheckbox:M.Z}),L()(He,"directives",{ClosePopup:ta.Z});const ia=(0,r._)("div",{class:"text-h6"},"Agregar Conductor",-1),ra=(0,r._)("div",{class:"text-h6"},"Modificar Conductor",-1);function sa(e,a,t,o,i,s){const n=(0,r.up)("q-btn"),d=(0,r.up)("q-input"),u=(0,r.up)("q-toolbar"),c=(0,r.up)("q-badge"),m=(0,r.up)("q-td"),p=(0,r.up)("q-table"),h=(0,r.up)("q-card-section"),g=(0,r.up)("q-form"),b=(0,r.up)("q-card"),w=(0,r.up)("q-dialog"),f=(0,r.up)("q-page");return(0,r.wg)(),(0,r.j4)(f,null,{default:(0,r.w5)((()=>[(0,r.Wm)(p,{rows:i.drivers,columns:i.driverColums,filter:i.search},{"top-right":(0,r.w5)((()=>[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Wm)(n,{flat:"",icon:"add_circle_outline",onClick:a[0]||(a[0]=e=>{i.showAddDriverDialog=!0,i.driverCrear=!0})}),(0,r.Wm)(d,{modelValue:i.search,"onUpdate:modelValue":a[1]||(a[1]=e=>i.search=e),outlined:"",dense:"",placeholder:"Buscar..."},null,8,["modelValue"])])),_:1})])),"body-cell-estado":(0,r.w5)((e=>[(0,r.Wm)(m,{props:e,"auto-width":""},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{dense:"","text-color":"white",color:"Activo"==e.row.estado?"green":"red"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,F.zw)(e.row.estado),1)])),_:2},1032,["color"])])),_:2},1032,["props"])])),"body-cell-option":(0,r.w5)((e=>[(0,r.Wm)(m,{props:e,"auto-width":""},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{flat:"",dense:"",icon:"o_edit",onClick:a=>s.driverEdit(e.row)},null,8,["onClick"]),(0,r.Wm)(n,{flat:"",dense:"",icon:"o_delete",onClick:a=>s.driverDelete(e.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"]),(0,r.Wm)(w,{modelValue:i.showAddDriverDialog,"onUpdate:modelValue":a[7]||(a[7]=e=>i.showAddDriverDialog=e)},{default:(0,r.w5)((()=>[(0,r.Wm)(b,{style:{width:"700px","max-width":"85vw"}},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{class:"row items-center"},{default:(0,r.w5)((()=>[ia])),_:1}),(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Wm)(g,{onSubmit:(0,l.iM)(s.driverCreate,["prevent"])},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{modelValue:i.driver.name,"onUpdate:modelValue":a[2]||(a[2]=e=>i.driver.name=e),hint:"",required:"",outlined:"",label:"Nombre"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.driver.contacto,"onUpdate:modelValue":a[3]||(a[3]=e=>i.driver.contacto=e),hint:"",required:"",outlined:"",label:"Contacto"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.driver.telefono,"onUpdate:modelValue":a[4]||(a[4]=e=>i.driver.telefono=e),hint:"",required:"",outlined:"",label:"Telefono"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.driver.celular,"onUpdate:modelValue":a[5]||(a[5]=e=>i.driver.celular=e),hint:"",required:"",outlined:"",label:"Celular"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.driver.licencia,"onUpdate:modelValue":a[6]||(a[6]=e=>i.driver.licencia=e),hint:"",required:"",outlined:"",label:"Licencia"},null,8,["modelValue"]),(0,r.Wm)(n,{loading:i.loading,type:"submit",color:"primary",icon:"add_circle_outline",label:"Guardar",class:"full-width"},null,8,["loading"])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.Wm)(w,{modelValue:i.showUpdateDriverDialog,"onUpdate:modelValue":a[13]||(a[13]=e=>i.showUpdateDriverDialog=e)},{default:(0,r.w5)((()=>[(0,r.Wm)(b,{style:{width:"700px","max-width":"85vw"}},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{class:"row items-center"},{default:(0,r.w5)((()=>[ra])),_:1}),(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Wm)(g,{onSubmit:(0,l.iM)(s.driverUpdate,["prevent"])},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{modelValue:i.driver.name,"onUpdate:modelValue":a[8]||(a[8]=e=>i.driver.name=e),hint:"",required:"",outlined:"",label:"Nombre"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.driver.contacto,"onUpdate:modelValue":a[9]||(a[9]=e=>i.driver.contacto=e),hint:"",required:"",outlined:"",label:"Contacto"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.driver.telefono,"onUpdate:modelValue":a[10]||(a[10]=e=>i.driver.telefono=e),hint:"",required:"",outlined:"",label:"Telefono"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.driver.celular,"onUpdate:modelValue":a[11]||(a[11]=e=>i.driver.celular=e),hint:"",required:"",outlined:"",label:"Celular"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.driver.licencia,"onUpdate:modelValue":a[12]||(a[12]=e=>i.driver.licencia=e),hint:"",required:"",outlined:"",label:"Licencia"},null,8,["modelValue"]),(0,r.Wm)(n,{loading:i.loading,type:"submit",color:"primary",icon:"add_circle_outline",label:"Guardar",class:"full-width"},null,8,["loading"])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}const na={name:"Driver",data(){return{roles:["INSCRIPCION","ACREDITACION","REFRIGERIO","ADMINISTRADOR"],showAddDriverDialog:!1,showUpdateDriverDialog:!1,search:"",drivers:[],driver:{},loading:!1,driverCrear:!0,driverColums:[{name:"option",field:"option",label:"Opciones",align:"left",sortable:!0},{name:"name",field:"name",label:"Nombre",align:"left",sortable:!0},{name:"contacto",field:"contacto",label:"Contacto",align:"left",sortable:!0},{name:"telefono",field:"telefono",label:"Telefono",align:"left",sortable:!0},{name:"celular",field:"celular",label:"Celular",align:"left",sortable:!0},{name:"licencia",field:"licencia",label:"Licencia",align:"left",sortable:!0}]}},methods:{driverUpdate(){this.loading=!0,this.$api.put(`driver/${this.driver.id}`,this.driver).then((e=>{this.loading=!1,this.showUpdateDriverDialog=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"check_circle",message:"Conductor actualizado"}),this.driver={},this.driversGet()})).catch((e=>{this.loading=!1,this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al actualizar conductor"})}))},driversGet(){this.$q.loading.show(),this.$api.get("driver").then((e=>{this.drivers=e.data,this.$q.loading.hide()}))},driverCreate(){this.driverCrear?(this.loading=!0,this.$api.post("driver",this.driver).then((e=>{this.driversGet(),this.showAddDriverDialog=!1,this.driver={},this.loading=!1})).catch((e=>{this.loading=!1,this.$q.notify({color:"negative",message:e.response.data.message,icon:"report_problem",position:"top"})}))):(this.loading=!0,this.$api.put("driver/"+this.driver.id,this.driver).then((e=>{this.driversGet(),this.showAddDriverDialog=!1,this.driver={},this.loading=!1})).catch((e=>{this.loading=!1,this.$q.notify({color:"negative",message:e.response.data.message,icon:"report_problem",position:"top"})})))},driverEdit(e){this.driver=e,this.driverCrear=!1,this.showUpdateDriverDialog=!0},updatePassword(e){this.$q.dialog({title:"Cambiar contraseña",message:"Ingrese la nueva contraseña",prompt:{model:"",type:"password"},cancel:!0,persistent:!0}).onOk((a=>{this.$api.put(`updatePassword/${e.id}`,{password:a}).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"check_circle",position:"top",message:"Contraseña actualizada"})})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",position:"top",message:e.response.data.message})}))})).onCancel((()=>{console.log("Cancel")})).onDismiss((()=>{console.log("Dismissed")}))},driverDelete(e){this.$q.dialog({title:"Eliminar",message:"¿Está seguro de eliminar el conductor?",ok:"Si",cancel:"No"}).onOk((()=>{this.$q.loading.show(),this.$api.delete("driver/"+e.id).then((e=>{this.driversGet()}))}))}},created(){this.driversGet()}},da=(0,d.Z)(na,[["render",sa]]),ua=da;L()(na,"components",{QPage:O.Z,QTable:K.Z,QToolbar:ee.Z,QBtn:G.Z,QInput:R.Z,QTd:ae.Z,QBadge:te.Z,QDialog:le.Z,QCard:Z.Z,QCardSection:P.Z,QForm:Q.Z});const ca=(0,r._)("div",{class:"text-h6"},"Agregar Usuario",-1),ma=(0,r._)("div",{class:"text-h6"},"Agregar Usuario",-1);function pa(e,a,t,o,i,s){const n=(0,r.up)("q-btn"),d=(0,r.up)("q-input"),u=(0,r.up)("q-toolbar"),c=(0,r.up)("q-badge"),m=(0,r.up)("q-td"),p=(0,r.up)("q-table"),h=(0,r.up)("q-card-section"),g=(0,r.up)("q-select"),b=(0,r.up)("q-form"),w=(0,r.up)("q-card"),f=(0,r.up)("q-dialog"),v=(0,r.up)("q-page");return(0,r.wg)(),(0,r.j4)(v,null,{default:(0,r.w5)((()=>[(0,r.Wm)(p,{rows:i.users,columns:i.userColums,filter:i.search},{"top-right":(0,r.w5)((()=>[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Wm)(n,{flat:"",icon:"add_circle_outline",onClick:a[0]||(a[0]=e=>{i.showAddUserDialog=!0,i.userCrear=!0})}),(0,r.Wm)(d,{modelValue:i.search,"onUpdate:modelValue":a[1]||(a[1]=e=>i.search=e),outlined:"",dense:"",placeholder:"Buscar..."},null,8,["modelValue"])])),_:1})])),"body-cell-role":(0,r.w5)((e=>[(0,r.Wm)(m,{props:e,"auto-width":""},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{dense:"","text-color":"white",color:"ADMINISTRADOR"==e.row.role?"red":"INSCRIPCION"==e.row.role?"green":"ACREDITACION"==e.row.role?"blue":"cyan"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,F.zw)(e.row.role.substring(0,4)),1)])),_:2},1032,["color"])])),_:2},1032,["props"])])),"body-cell-option":(0,r.w5)((e=>[(0,r.Wm)(m,{props:e,"auto-width":""},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{flat:"",dense:"",icon:"o_edit",onClick:a=>s.userEdit(e.row)},null,8,["onClick"]),1!=e.row.id?((0,r.wg)(),(0,r.j4)(n,{key:0,flat:"",dense:"",icon:"o_delete",onClick:a=>s.userDelete(e.row)},null,8,["onClick"])):(0,r.kq)("",!0),1!=e.row.id?((0,r.wg)(),(0,r.j4)(n,{key:1,flat:"",dense:"",icon:"o_key",onClick:a=>s.updatePassword(e.row)},null,8,["onClick"])):(0,r.kq)("",!0)])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"]),(0,r.Wm)(f,{modelValue:i.showAddUserDialog,"onUpdate:modelValue":a[6]||(a[6]=e=>i.showAddUserDialog=e)},{default:(0,r.w5)((()=>[(0,r.Wm)(w,{style:{width:"700px","max-width":"85vw"}},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{class:"row items-center"},{default:(0,r.w5)((()=>[ca])),_:1}),(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Wm)(b,{onSubmit:(0,l.iM)(s.userCreate,["prevent"])},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{modelValue:i.user.name,"onUpdate:modelValue":a[2]||(a[2]=e=>i.user.name=e),hint:"",required:"",outlined:"",label:"Nombre"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.user.email,"onUpdate:modelValue":a[3]||(a[3]=e=>i.user.email=e),hint:"",required:"",outlined:"",label:"Email"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.user.password,"onUpdate:modelValue":a[4]||(a[4]=e=>i.user.password=e),type:"password",hint:"",required:"",outlined:"",label:"Password"},null,8,["modelValue"]),(0,r.Wm)(g,{modelValue:i.user.role,"onUpdate:modelValue":a[5]||(a[5]=e=>i.user.role=e),hint:"",required:"",outlined:"",label:"Rol",options:i.roles},null,8,["modelValue","options"]),(0,r.Wm)(n,{loading:i.loading,type:"submit",color:"primary",icon:"add_circle_outline",label:"Guardar",class:"full-width"},null,8,["loading"])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.Wm)(f,{modelValue:i.showUpdateUserDialog,"onUpdate:modelValue":a[10]||(a[10]=e=>i.showUpdateUserDialog=e)},{default:(0,r.w5)((()=>[(0,r.Wm)(w,{style:{width:"700px","max-width":"85vw"}},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{class:"row items-center"},{default:(0,r.w5)((()=>[ma])),_:1}),(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Wm)(b,{onSubmit:(0,l.iM)(s.userUpdate,["prevent"])},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{modelValue:i.user.name,"onUpdate:modelValue":a[7]||(a[7]=e=>i.user.name=e),hint:"",required:"",outlined:"",label:"Nombre"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:i.user.email,"onUpdate:modelValue":a[8]||(a[8]=e=>i.user.email=e),hint:"",required:"",outlined:"",label:"Email"},null,8,["modelValue"]),(0,r.Wm)(g,{modelValue:i.user.role,"onUpdate:modelValue":a[9]||(a[9]=e=>i.user.role=e),hint:"",required:"",outlined:"",label:"Rol",options:i.roles},null,8,["modelValue","options"]),(0,r.Wm)(n,{loading:i.loading,type:"submit",color:"primary",icon:"add_circle_outline",label:"Guardar",class:"full-width"},null,8,["loading"])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}const ha={name:"User",data(){return{roles:["INSCRIPCION","ACREDITACION","REFRIGERIO","ADMINISTRADOR"],showAddUserDialog:!1,showUpdateUserDialog:!1,search:"",users:[],user:{},loading:!1,userCrear:!0,userColums:[{name:"option",field:"option",label:"Opciones",align:"left",sortable:!0},{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0},{name:"email",label:"Email",field:"email",align:"left",sortable:!0}]}},methods:{userUpdate(){this.loading=!0,this.$api.put(`user/${this.user.id}`,this.user).then((e=>{this.loading=!1,this.showUpdateUserDialog=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"check_circle",message:"Usuario actualizado"}),this.user={},this.usersGet()})).catch((e=>{this.loading=!1,this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al actualizar usuario"})}))},usersGet(){this.$q.loading.show(),this.$api.get("user").then((e=>{this.users=e.data,this.$q.loading.hide()}))},userCreate(){this.userCrear?(this.loading=!0,this.$api.post("user",this.user).then((e=>{this.usersGet(),this.showAddUserDialog=!1,this.user={},this.loading=!1})).catch((e=>{this.loading=!1,this.$q.notify({color:"negative",message:e.response.data.message,icon:"report_problem",position:"top"})}))):(this.loading=!0,this.$api.put("user/"+this.user.id,this.user).then((e=>{this.usersGet(),this.showAddUserDialog=!1,this.user={},this.loading=!1})).catch((e=>{this.loading=!1,this.$q.notify({color:"negative",message:e.response.data.message,icon:"report_problem",position:"top"})})))},userEdit(e){this.user=e,this.userCrear=!1,this.showUpdateUserDialog=!0},updatePassword(e){this.$q.dialog({title:"Cambiar contraseña",message:"Ingrese la nueva contraseña",prompt:{model:"",type:"password"},cancel:!0,persistent:!0}).onOk((a=>{this.$api.put(`updatePassword/${e.id}`,{password:a}).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"check_circle",position:"top",message:"Contraseña actualizada"})})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",position:"top",message:e.response.data.message})}))})).onCancel((()=>{console.log("Cancel")})).onDismiss((()=>{console.log("Dismissed")}))},userDelete(e){this.$q.dialog({title:"Eliminar",message:"¿Está seguro de eliminar el usuario?",ok:"Si",cancel:"No"}).onOk((()=>{this.$q.loading.show(),this.$api.delete("user/"+e.id).then((e=>{this.usersGet()}))}))}},created(){this.usersGet()}},ga=(0,d.Z)(ha,[["render",pa]]),ba=ga;L()(ha,"components",{QPage:O.Z,QTable:K.Z,QToolbar:ee.Z,QBtn:G.Z,QInput:R.Z,QTd:ae.Z,QBadge:te.Z,QDialog:le.Z,QCard:Z.Z,QCardSection:P.Z,QForm:Q.Z,QSelect:oe.Z});const wa=[{path:"/",component:()=>Promise.all([t.e(736),t.e(40)]).then(t.bind(t,2040)),children:[{path:"",component:()=>t.e(519).then(t.bind(t,9519)),meta:{requiresAuth:!0}},{path:"empresa",component:re,meta:{requiresAuth:!0}},{path:"contratista",component:me,meta:{requiresAuth:!0}},{path:"transporte",component:fe,meta:{requiresAuth:!0}},{path:"tornaguia",component:oa,meta:{requiresAuth:!0}},{path:"driver",component:ua,meta:{requiresAuth:!0}},{path:"user",component:ba,meta:{requiresAuth:!0}}]},{path:"/login",component:j},{path:"/:catchAll(.*)*",component:()=>t.e(862).then(t.bind(t,1862))}],fa=wa,va=(0,m.BC)((function(){const e=g.r5,a=(0,g.p7)({scrollBehavior:()=>({left:0,top:0}),routes:fa,history:e("")});return a.beforeEach(((e,a,t)=>{if(e.matched.some((e=>e.meta.requiresAuth))){if((0,T.A)().isLogged)return void t();t("/login")}else t()})),a}));async function _a(e,a){const t=e(c);t.use(o.Z,a);const l="function"===typeof h?await h({}):h;t.use(l);const r=(0,i.Xl)("function"===typeof va?await va({store:l}):va);return l.use((({store:e})=>{e.router=r})),{app:t,store:l,router:r}}var Ca=t(8934),Va=t(6827),qa=t(6950),Wa=t(4790),Ua=t(3703);const ya={config:{},lang:Ca.Z,plugins:{Notify:Va.Z,Loading:qa.Z,Dialog:Wa.Z,LocalStorage:Ua.Z}};var Da=t(368);(0,Da.z)("service-worker.js",{ready(){},registered(){},cached(){},updatefound(){},updated(){},offline(){},error(){}}),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&window.navigator.standalone&&t.e(736).then(t.t.bind(t,4848,23));const Aa="";async function $a({app:e,router:a,store:t},l){let o=!1;const i=e=>{try{return a.resolve(e).href}catch(t){}return Object(e)===e?null:e},r=e=>{if(o=!0,"string"===typeof e&&/^https?:\/\//.test(e))return void(window.location.href=e);const a=i(e);null!==a&&(window.location.href=a,window.location.reload())},s=window.location.href.replace(window.location.origin,"");for(let d=0;!1===o&&d<l.length;d++)try{await l[d]({app:e,router:a,store:t,ssrContext:null,redirect:r,urlPath:s,publicPath:Aa})}catch(n){return n&&n.url?void r(n.url):void console.error("[Quasar] boot error:",n)}!0!==o&&(e.use(a),e.mount("#q-app"))}_a(l.ri,ya).then((e=>{const[a,l]=void 0!==Promise.allSettled?["allSettled",e=>e.map((e=>{if("rejected"!==e.status)return e.value.default;console.error("[Quasar] boot error:",e.reason)}))]:["all",e=>e.map((e=>e.default))];return Promise[a]([Promise.resolve().then(t.bind(t,1569))]).then((a=>{const t=l(a).filter((e=>"function"===typeof e));$a(e,t)}))}))},1569:(e,a,t)=>{t.r(a),t.d(a,{api:()=>s,default:()=>n});t(9665);var l=t(3340),o=t(9981),i=t.n(o),r=t(7292);const s=i().create({baseURL:"https://btorna.siscenter.org/api/"}),n=(0,l.xr)((({app:e,router:a})=>{e.config.globalProperties.$axios=i();const t=localStorage.getItem("tokenTor");t?(s.defaults.headers.common["Authorization"]="Bearer "+t,s.post("me").then((e=>{console.log(e.data),(0,r.A)().user=e.data,(0,r.A)().isLogged=!0})).catch((e=>{(0,r.A)().isLogged=!1,s.defaults.headers.common["Authorization"]="",s.post("logout").then((e=>{localStorage.removeItem("tokenTor")})).catch((e=>{localStorage.removeItem("tokenTor")}))}))):(a.push("/login"),(0,r.A)().isLogged=!1),e.config.globalProperties.$api=s}))},7292:(e,a,t)=>{t.d(a,{A:()=>o});var l=t(1809);const o=(0,l.Q_)("counter",{state:()=>({counter:0,user:{},isLogged:!!localStorage.getItem("tokenTor")}),getters:{doubleCount:e=>2*e.counter},actions:{increment(){this.counter++}}})}},a={};function t(l){var o=a[l];if(void 0!==o)return o.exports;var i=a[l]={exports:{}};return e[l](i,i.exports,t),i.exports}t.m=e,(()=>{var e=[];t.O=(a,l,o,i)=>{if(!l){var r=1/0;for(u=0;u<e.length;u++){for(var[l,o,i]=e[u],s=!0,n=0;n<l.length;n++)(!1&i||r>=i)&&Object.keys(t.O).every((e=>t.O[e](l[n])))?l.splice(n--,1):(s=!1,i<r&&(r=i));if(s){e.splice(u--,1);var d=o();void 0!==d&&(a=d)}}return a}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[l,o,i]}})(),(()=>{t.n=e=>{var a=e&&e.__esModule?()=>e["default"]:()=>e;return t.d(a,{a}),a}})(),(()=>{var e,a=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;t.t=function(l,o){if(1&o&&(l=this(l)),8&o)return l;if("object"===typeof l&&l){if(4&o&&l.__esModule)return l;if(16&o&&"function"===typeof l.then)return l}var i=Object.create(null);t.r(i);var r={};e=e||[null,a({}),a([]),a(a)];for(var s=2&o&&l;"object"==typeof s&&!~e.indexOf(s);s=a(s))Object.getOwnPropertyNames(s).forEach((e=>r[e]=()=>l[e]));return r["default"]=()=>l,t.d(i,r),i}})(),(()=>{t.d=(e,a)=>{for(var l in a)t.o(a,l)&&!t.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:a[l]})}})(),(()=>{t.f={},t.e=e=>Promise.all(Object.keys(t.f).reduce(((a,l)=>(t.f[l](e,a),a)),[]))})(),(()=>{t.u=e=>"js/"+e+"."+{40:"b21d652a",519:"6e59970b",862:"32716046"}[e]+".js"})(),(()=>{t.miniCssF=e=>"css/"+{143:"app",736:"vendor"}[e]+"."+{143:"d8386853",736:"94d27a4e"}[e]+".css"})(),(()=>{t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{t.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a)})(),(()=>{var e={},a="front:";t.l=(l,o,i,r)=>{if(e[l])e[l].push(o);else{var s,n;if(void 0!==i)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var c=d[u];if(c.getAttribute("src")==l||c.getAttribute("data-webpack")==a+i){s=c;break}}s||(n=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,t.nc&&s.setAttribute("nonce",t.nc),s.setAttribute("data-webpack",a+i),s.src=l),e[l]=[o];var m=(a,t)=>{s.onerror=s.onload=null,clearTimeout(p);var o=e[l];if(delete e[l],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((e=>e(t))),a)return a(t)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=m.bind(null,s.onerror),s.onload=m.bind(null,s.onload),n&&document.head.appendChild(s)}}})(),(()=>{t.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{t.p=""})(),(()=>{var e={143:0};t.f.j=(a,l)=>{var o=t.o(e,a)?e[a]:void 0;if(0!==o)if(o)l.push(o[2]);else{var i=new Promise(((t,l)=>o=e[a]=[t,l]));l.push(o[2]=i);var r=t.p+t.u(a),s=new Error,n=l=>{if(t.o(e,a)&&(o=e[a],0!==o&&(e[a]=void 0),o)){var i=l&&("load"===l.type?"missing":l.type),r=l&&l.target&&l.target.src;s.message="Loading chunk "+a+" failed.\n("+i+": "+r+")",s.name="ChunkLoadError",s.type=i,s.request=r,o[1](s)}};t.l(r,n,"chunk-"+a,a)}},t.O.j=a=>0===e[a];var a=(a,l)=>{var o,i,[r,s,n]=l,d=0;if(r.some((a=>0!==e[a]))){for(o in s)t.o(s,o)&&(t.m[o]=s[o]);if(n)var u=n(t)}for(a&&a(l);d<r.length;d++)i=r[d],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(u)},l=globalThis["webpackChunkfront"]=globalThis["webpackChunkfront"]||[];l.forEach(a.bind(null,0)),l.push=a.bind(null,l.push.bind(l))})();var l=t.O(void 0,[736],(()=>t(5812)));l=t.O(l)})();